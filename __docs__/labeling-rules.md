# 履歴ラベリングルール

## 概要

Claude Code の履歴をラベリングし、日報生成や振り返り分析に活用する。

## ラベル定義

| ラベル | 識別子 | 説明 |
|-------|--------|------|
| 🔧 作業依頼 | `task_request` | 実装、Issue作成、PR作成、マージ、デプロイなどの依頼 |
| 🔍 技術確認 | `tech_check` | CI状態、エラー確認、動作確認の依頼 |
| 💬 フィードバック | `feedback` | 作業結果への評価やコメント |
| ⚡ コマンド | `command` | /clear, /exit, /resume などのCLIコマンド |
| 📎 情報共有 | `info_share` | URL共有、コンテキスト提供 |
| ❓ 質問 | `question` | 技術的な質問や確認 |

## 分類ルール

### 🔧 作業依頼 (`task_request`)

**キーワードパターン:**
- 「〜してほしい」「〜してくれ」「〜して」「〜お願い」
- 「実装」「作成」「削除」「更新」「マージ」「デプロイ」
- 「Issue化して」「PR作成」

**定型文:**
```
Issue化して、実装して、テストの改善も行って、PR作成まで実行してほしい
```

### 🔍 技術確認 (`tech_check`)

**キーワードパターン:**
- 「確認して」「チェックして」
- 「〜出てない？」「〜通ってますか？」
- 「どうなった？」「できた？」

### 💬 フィードバック (`feedback`)

**キーワードパターン:**
- 「いい感じ」「良さそう」「OK」
- 「思ったのと違う」「〜ではない」
- 「機能してない」「壊れてる」

### ⚡ コマンド (`command`)

**パターン:**
- `/clear`
- `/exit`
- `/resume`
- その他 `/` で始まるもの

### 📎 情報共有 (`info_share`)

**キーワードパターン:**
- URL (https://...)
- ファイルパス指定のみ
- 「〜を追加した」「〜を対応した」(報告形式)

### ❓ 質問 (`question`)

**キーワードパターン:**
- 「〜ですか？」「〜か？」
- 「可能？」「必要？」

## 分類の優先順位

複数のラベルに該当する場合:

1. `command` - /で始まる場合は最優先
2. `task_request` - 依頼が含まれる場合
3. `tech_check` - 確認依頼の場合
4. `question` - 疑問文の場合
5. `feedback` - 評価コメントの場合
6. `info_share` - 情報提供のみの場合

## 出力形式

```json
{
  "entries": [
    {
      "display": "PRを全部マージしてほしい",
      "project": "/Users/xxx/projects/my-app",
      "timestamp": "2026-01-13T14:14:10.728Z",
      "label": "task_request",
      "label_emoji": "🔧"
    }
  ],
  "summary": {
    "task_request": 52,
    "tech_check": 14,
    "feedback": 9,
    "command": 14,
    "info_share": 4,
    "question": 3
  }
}
```

## 活用例

### 日報生成

`task_request` ラベルを中心に作業内容をまとめる:

```
## 今日の作業
- PR マージ作業 (calculator-for-kids)
- MainLogo.tsx 更新 (jobantenna)
- MCP サーバー実装 (claude-json-reporter-mcp)
```

### 振り返り分析

フィードバック比率で作業品質を評価:

```
ポジティブ: 7件 (いい感じ, 良さそう)
ネガティブ: 2件 (機能してない, 違う)
```
